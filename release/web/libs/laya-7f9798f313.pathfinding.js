!function(t,e,i){i.un,i.uns,i.static;var n=i.class,A=(i.getset,i.__newvec,function(){function t(){}return n(t,"PathFinding.core.DiagonalMovement"),t.Always=1,t.Never=2,t.IfAtMostOneObstacle=3,t.OnlyWhenNoObstacles=4,t}()),k=(function(){function c(t,e,i){this.width=0,this.height=0,this.nodes=null;var n=0;"number"==typeof t?n=t:(e=t.length,n=t[0].length,i=t),this.width=n,this.height=e,this.nodes=this._buildNodes(n,e,i)}n(c,"PathFinding.core.Grid");var t=c.prototype;t._buildNodes=function(t,e,i){var n=0,s=0,a=[];for(n=0;n<e;++n)for(a[n]=[],s=0;s<t;++s)a[n][s]=new o(s,n);if(null==i)return a;if(i.length!=e||i[0].length!=t)throw new Error("Matrix size does not fit");for(n=0;n<e;++n)for(s=0;s<t;++s)i[n][s]&&(a[n][s].walkable=!1);return a},t.getNodeAt=function(t,e){return this.nodes[e][t]},t.isWalkableAt=function(t,e){return this.isInside(t,e)&&this.nodes[e][t].walkable},t.isInside=function(t,e){return 0<=t&&t<this.width&&0<=e&&e<this.height},t.setWalkableAt=function(t,e,i){this.nodes[e][t].walkable=i},t.getNeighbors=function(t,e){var i=t.x,n=t.y,s=[],a=!1,r=!1,o=!1,h=!1,l=!1,u=!1,f=!1,d=!1,c=this.nodes;if(this.isWalkableAt(i,n-1)&&(s.push(c[n-1][i]),a=!0),this.isWalkableAt(i+1,n)&&(s.push(c[n][i+1]),o=!0),this.isWalkableAt(i,n+1)&&(s.push(c[n+1][i]),l=!0),this.isWalkableAt(i-1,n)&&(s.push(c[n][i-1]),f=!0),e==A.Never)return s;if(e==A.OnlyWhenNoObstacles)r=f&&a,h=a&&o,u=o&&l,d=l&&f;else if(e==A.IfAtMostOneObstacle)r=f||a,h=a||o,u=o||l,d=l||f;else{if(e!=A.Always)throw new Error("Incorrect value of diagonalMovement");d=u=h=r=!0}return r&&this.isWalkableAt(i-1,n-1)&&s.push(c[n-1][i-1]),h&&this.isWalkableAt(i+1,n-1)&&s.push(c[n-1][i+1]),u&&this.isWalkableAt(i+1,n+1)&&s.push(c[n+1][i+1]),d&&this.isWalkableAt(i-1,n+1)&&s.push(c[n+1][i-1]),s},t.clone=function(){var t=0,e=0,i=this.width,n=this.height,s=this.nodes,a=new c(i,n),r=[];for(t=0;t<n;++t)for(r[t]=[],e=0;e<i;++e)r[t][e]=new o(e,t,s[t][e].walkable);return a.nodes=r,a},t.reset=function(){for(var t,e=0;e<this.height;++e)for(var i=0;i<this.width;++i)(t=this.nodes[e][i]).g=0,t.f=0,t.h=0,t.by=0,t.parent=null,t.opened=null,t.closed=null,t.tested=null},c.createGridFromAStarMap=function(t){for(var e=t.width,i=t.height,n=t.getPixels(),s=[],a=0,r=0;r<e;r++)for(var o=s[r]=[],h=0;h<i;h++){var l=n[a++],u=n[a++],f=n[a++],d=n[a++];o[h]=255==l&&255==u&&255==f&&255==d?1:0}return new c(e,i,s)}}(),function(){function t(){}return n(t,"PathFinding.core.Heuristic"),t.manhattan=function(t,e){return t+e},t.euclidean=function(t,e){return Math.sqrt(t*t+e*e)},t.octile=function(t,e){var i=Math.SQRT2-1;return t<e?i*t+e:i*e+t},t.chebyshev=function(t,e){return Math.max(t,e)},t}()),o=function(){function t(t,e,i){this.x=0,this.y=0,this.g=0,this.f=0,this.h=0,this.by=0,this.parent=null,this.opened=null,this.closed=null,this.tested=null,this.retainCount=null,this.walkable=!1,void 0===i&&(i=!0),this.x=t,this.y=e,this.walkable=i}return n(t,"PathFinding.core.Node",null,"Node$1"),t}(),y=function(){function A(){}return n(A,"PathFinding.core.Util"),A.backtrace=function(t){for(var e=[[t.x,t.y]];t.parent;)t=t.parent,e.push([t.x,t.y]);return e.reverse()},A.biBacktrace=function(t,e){var i=A.backtrace(t),n=A.backtrace(e);return i.concat(n.reverse())},A.pathLength=function(t){var e=0,i=0,n=0,s=0,a=0,r=0;for(e=1;e<t.length;++e)n=t[e-1],s=t[e],a=n[0]-s[0],r=n[1]-s[1],i+=Math.sqrt(a*a+r*r);return i},A.interpolate=function(t,e,i,n){var s,a,r,o,h=Math.abs,l=[],u=0,f=0;for(s=t<i?1:-1,a=e<n?1:-1,u=(r=h(i-t))-(o=h(n-e));l.push([t,e]),t!=i||e!=n;)-o<(f=2*u)&&(u-=o,t+=s),f<r&&(u+=r,e+=a);return l},A.expandPath=function(t){var e,i,n,s=[],a=t.length,r=0,o=0,h=0;if(a<2)return s;for(o=0;o<a-1;++o)for(e=t[o],i=t[o+1],r=(n=A.interpolate(e[0],e[1],i[0],i[1])).length,h=0;h<r-1;++h)s.push(n[h]);return s.push(t[a-1]),s},A.smoothenPath=function(t,e){var i,n,s,a,r,o=e.length,h=e[0][0],l=e[0][1],u=e[o-1][0],f=e[o-1][1],d=0,c=0,p=0,g=0,b=0,m=0,v=!1;for(i=[[d=h,c=l]],b=2;b<o;++b){for(p=(n=e[b])[0],g=n[1],s=A.interpolate(d,c,p,g),v=!1,m=1;m<s.length;++m)if(a=s[m],!t.isWalkableAt(a[0],a[1])){v=!0;break}v&&(r=e[b-1],i.push(r),d=r[0],c=r[1])}return i.push([u,f]),i},A.compressPath=function(t){if(t.length<3)return t;var e=[],i=t[0][0],n=t[0][1],s=t[1][0],a=t[1][1],r=s-i,o=a-n,h=0,l=0,u=0,f=0,d=NaN,c=0;for(r/=d=Math.sqrt(r*r+o*o),o/=d,e.push([i,n]),c=2;c<t.length;c++)h=s,l=a,u=r,f=o,r=(s=t[c][0])-h,o=(a=t[c][1])-l,o/=d=Math.sqrt(r*r+o*o),(r/=d)===u&&o===f||e.push([h,l]);return e.push([s,a]),e},A}(),s=function(){function t(t){this.allowDiagonal=!1,this.dontCrossCorners=!1,this.heuristic=null,this.weight=0,this.diagonalMovement=0,t=t||{},this.allowDiagonal=t.allowDiagonal,this.dontCrossCorners=t.dontCrossCorners,this.heuristic=t.heuristic||k.manhattan,this.weight=t.weight||1,this.diagonalMovement=t.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=A.OnlyWhenNoObstacles:this.diagonalMovement=A.IfAtMostOneObstacle:this.diagonalMovement=A.Never),this.diagonalMovement===A.Never?this.heuristic=t.heuristic||k.manhattan:this.heuristic=t.heuristic||k.octile}return n(t,"PathFinding.finders.AStarFinder"),t.prototype.findPath=function(t,e,i,n,s){var a,r,o,h=new N(function(t,e){return t.f-e.f}),l=s.getNodeAt(t,e),u=s.getNodeAt(i,n),f=this.heuristic,d=this.diagonalMovement,c=this.weight,p=Math.abs,g=Math.SQRT2,b=0,m=0,v=0,A=0,k=0;for(l.g=0,l.f=0,h.push(l),l.opened=!0;!h.empty();){if((a=h.pop()).closed=!0,a===u)return y.backtrace(u);for(b=0,m=(r=s.getNeighbors(a,d)).length;b<m;++b)(o=r[b]).closed||(v=o.x,A=o.y,k=a.g+(v-a.x==0||A-a.y==0?1:g),(!o.opened||k<o.g)&&(o.g=k,o.h=o.h||c*f(p(v-i),p(A-n)),o.f=o.g+o.h,o.parent=a,o.opened?h.updateItem(o):(h.push(o),o.opened=!0)))}return[]},t}(),a=function(){function t(t){this.allowDiagonal=!1,this.dontCrossCorners=!1,this.diagonalMovement=0,this.heuristic=null,this.weight=0,t=t||{},this.allowDiagonal=t.allowDiagonal,this.dontCrossCorners=t.dontCrossCorners,this.diagonalMovement=t.diagonalMovement,this.heuristic=t.heuristic||k.manhattan,this.weight=t.weight||1,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=A.OnlyWhenNoObstacles:this.diagonalMovement=A.IfAtMostOneObstacle:this.diagonalMovement=A.Never),this.diagonalMovement==A.Never?this.heuristic=t.heuristic||k.manhattan:this.heuristic=t.heuristic||k.octile}return n(t,"PathFinding.finders.BiAStarFinder"),t.prototype.findPath=function(t,e,i,n,s){var a,r,o,h=function(t,e){return t.f-e.f},l=new N(h),u=new N(h),f=s.getNodeAt(t,e),d=s.getNodeAt(i,n),c=this.heuristic,p=this.diagonalMovement,g=this.weight,b=Math.abs,m=Math.SQRT2,v=0,A=0,k=0,W=0,M=0;for(f.g=0,f.f=0,l.push(f),f.opened=1,d.g=0,d.f=0,u.push(d),d.opened=2;!l.empty()&&!u.empty();){for((a=l.pop()).closed=!0,v=0,A=(r=s.getNeighbors(a,p)).length;v<A;++v)if(!(o=r[v]).closed){if(2===o.opened)return y.biBacktrace(a,o);k=o.x,W=o.y,M=a.g+(k-a.x==0||W-a.y==0?1:m),(!o.opened||M<o.g)&&(o.g=M,o.h=o.h||g*c(b(k-i),b(W-n)),o.f=o.g+o.h,o.parent=a,o.opened?l.updateItem(o):(l.push(o),o.opened=1))}for((a=u.pop()).closed=!0,v=0,A=(r=s.getNeighbors(a,p)).length;v<A;++v)if(!(o=r[v]).closed){if(1===o.opened)return y.biBacktrace(o,a);k=o.x,W=o.y,M=a.g+(k-a.x==0||W-a.y==0?1:m),(!o.opened||M<o.g)&&(o.g=M,o.h=o.h||g*c(b(k-t),b(W-e)),o.f=o.g+o.h,o.parent=a,o.opened?u.updateItem(o):(u.push(o),o.opened=2))}}return[]},t}(),r=(function(){function t(t){this.allowDiagonal=!1,this.dontCrossCorners=!1,this.heuristic=null,this.weight=0,this.diagonalMovement=0,t=t||{},this.allowDiagonal=t.allowDiagonal,this.dontCrossCorners=t.dontCrossCorners,this.diagonalMovement=t.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=A.OnlyWhenNoObstacles:this.diagonalMovement=A.IfAtMostOneObstacle:this.diagonalMovement=A.Never)}n(t,"PathFinding.finders.BiBreadthFirstFinder"),t.prototype.findPath=function(t,e,i,n,s){var a,r,o,h=s.getNodeAt(t,e),l=s.getNodeAt(i,n),u=[],f=[],d=this.diagonalMovement,c=0,p=0;for(u.push(h),h.opened=!0,h.by=0,f.push(l),l.opened=!0,l.by=1;u.length&&f.length;){for((o=u.shift()).closed=!0,c=0,p=(a=s.getNeighbors(o,d)).length;c<p;++c)if(!(r=a[c]).closed)if(r.opened){if(1===r.by)return y.biBacktrace(o,r)}else u.push(r),r.parent=o,r.opened=!0,r.by=0;for((o=f.shift()).closed=!0,c=0,p=(a=s.getNeighbors(o,d)).length;c<p;++c)if(!(r=a[c]).closed)if(r.opened){if(0===r.by)return y.biBacktrace(r,o)}else f.push(r),r.parent=o,r.opened=!0,r.by=1}return[]}}(),function(){function t(t){this.allowDiagonal=!1,this.dontCrossCorners=!1,this.heuristic=null,this.weight=0,this.diagonalMovement=0,t=t||{},this.allowDiagonal=t.allowDiagonal,this.dontCrossCorners=t.dontCrossCorners,this.diagonalMovement=t.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=A.OnlyWhenNoObstacles:this.diagonalMovement=A.IfAtMostOneObstacle:this.diagonalMovement=A.Never)}n(t,"PathFinding.finders.BreadthFirstFinder"),t.prototype.findPath=function(t,e,i,n,s){var a,r,o,h=[],l=this.diagonalMovement,u=s.getNodeAt(t,e),f=s.getNodeAt(i,n),d=0,c=0;for(h.push(u),u.opened=!0;h.length;){if((o=h.shift()).closed=!0,o===f)return y.backtrace(f);for(d=0,c=(a=s.getNeighbors(o,l)).length;d<c;++d)(r=a[d]).closed||r.opened||(h.push(r),r.opened=!0,r.parent=o)}return[]}}(),function(){function t(t){this.allowDiagonal=!1,this.dontCrossCorners=!1,this.heuristic=null,this.weight=0,this.diagonalMovement=0,this.trackRecursion=!1,this.timeLimit=NaN,t=t||{},this.allowDiagonal=t.allowDiagonal,this.dontCrossCorners=t.dontCrossCorners,this.diagonalMovement=t.diagonalMovement,this.heuristic=t.heuristic||k.manhattan,this.weight=t.weight||1,this.trackRecursion=t.trackRecursion||!1,this.timeLimit=t.timeLimit||1/0,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=A.OnlyWhenNoObstacles:this.diagonalMovement=A.IfAtMostOneObstacle:this.diagonalMovement=A.Never),this.diagonalMovement===A.Never?this.heuristic=t.heuristic||k.manhattan:this.heuristic=t.heuristic||k.octile}n(t,"PathFinding.finders.IDAStarFinder"),t.prototype.findPath=function(t,e,i,n,c){var s,p=this,g=(new Date).getTime(),b=function(t,e){return p.heuristic(Math.abs(e.x-t.x),Math.abs(e.y-t.y))},m=function(t,e,i,n,s){if(0,0<p.timeLimit&&(new Date).getTime()-g>1e3*p.timeLimit)return 1/0;var a=e+b(t,v)*p.weight;if(i<a)return a;if(t==v)return n[s]=[t.x,t.y],t;var r,o,h,l=0,u=0,f=0,d=c.getNeighbors(t,p.diagonalMovement);for(l=1/(f=0);r=d[f];++f){if(p.trackRecursion&&(r.retainCount=r.retainCount+1||1,1!=r.tested&&(r.tested=!0)),(u=m(r,e+(h=r,(o=t).x===h.x||o.y===h.y?1:Math.SQRT2),i,n,s+1))instanceof PathFinding.core.Node)return n[s]=[t.x,t.y],u;p.trackRecursion&&0==--r.retainCount&&(r.tested=!1),u<l&&(l=u)}return l},a=c.getNodeAt(t,e),v=c.getNodeAt(i,n),r=b(a,v),o=0,h=0;for(o=0;;++o){if((h=m(a,0,r,s=[],0))==1/0){s=[];break}if(h instanceof PathFinding.core.Node)break;r=h}return s}}(),function(){function t(t){this.grid=null,this.openList=null,this.startNode=null,this.endNode=null,this.heuristic=null,this.trackJumpRecursion=!1,t=t||{},this.heuristic=t.heuristic||k.manhattan,this.trackJumpRecursion=t.trackJumpRecursion||!1}n(t,"PathFinding.finders.JumpPointFinderBase");var e=t.prototype;return e.findPath=function(t,e,i,n,s){var a,r=this.openList=new N(function(t,e){return t.f-e.f}),o=this.startNode=s.getNodeAt(t,e),h=this.endNode=s.getNodeAt(i,n);for(this.grid=s,o.g=0,o.f=0,r.push(o),o.opened=!0;!r.empty();){if((a=r.pop()).closed=!0,a==h)return y.expandPath(y.backtrace(h));this._identifySuccessors(a)}return[]},e._identifySuccessors=function(t){var e,i,n,s,a,r=this.grid,o=this.heuristic,h=this.openList,l=this.endNode.x,u=this.endNode.y,f=0,d=t.x,c=t.y,p=0,g=0,b=0,m=0,v=Math.abs;Math.max;for(f=0,s=(e=this._findNeighbors(t)).length;f<s;++f)if(i=e[f],n=this._jump(i[0],i[1],d,c)){if(p=n[0],g=n[1],(a=r.getNodeAt(p,g)).closed)continue;b=k.octile(v(p-d),v(g-c)),m=t.g+b,(!a.opened||m<a.g)&&(a.g=m,a.h=a.h||o(v(p-l),v(g-u)),a.f=a.g+a.h,a.parent=t,a.opened?h.updateItem(a):(h.push(a),a.opened=!0))}},e._jump=function(t,e,i,n){return[]},e._findNeighbors=function(t){return[]},t}()),N=(function(){function t(t){}n(t,"PathFinding.finders.JumpPointFinder")}(),function(){function t(t){this.allowDiagonal=!1,this.dontCrossCorners=!1,this.diagonalMovement=0,this.heuristic=null,t=t||{},this.allowDiagonal=t.allowDiagonal,this.dontCrossCorners=t.dontCrossCorners,this.heuristic=t.heuristic||k.manhattan,this.diagonalMovement=t.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=A.OnlyWhenNoObstacles:this.diagonalMovement=A.IfAtMostOneObstacle:this.diagonalMovement=A.Never),this.diagonalMovement==A.Never?this.heuristic=t.heuristic||k.manhattan:this.heuristic=t.heuristic||k.octile}n(t,"PathFinding.finders.TraceFinder"),t.prototype.findPath=function(t,e,i,n,s){var a,r,o,h=new N(function(t,e){return t.f-e.f}),l=s.getNodeAt(t,e),u=s.getNodeAt(i,n),f=this.heuristic,d=(this.allowDiagonal,this.dontCrossCorners,Math.abs),c=Math.SQRT2,p=0,g=0,b=0,m=0,v=0;for(l.g=0,l.f=0,h.push(l),l.opened=!0;!h.empty();){if((a=h.pop()).closed=!0,a===u)return y.backtrace(u);for(p=0,g=(r=s.getNeighbors(a,this.diagonalMovement)).length;p<g;++p)(o=r[p]).closed||(b=o.x,m=o.y,v=a.g+(b-a.x==0||m-a.y==0?1:c),(!o.opened||v<o.g)&&(o.g=v*g/9,o.h=o.h||f(d(b-i),d(m-n)),o.f=o.g+o.h,o.parent=a,o.opened?h.updateItem(o):(h.push(o),o.opened=!0)))}return[]}}(),function(){function e(t){this.cmp=null,this.nodes=null,this.heapFunction=new h,this.cmp=null!=t?t:this.heapFunction.defaultCmp,this.nodes=[]}n(e,"PathFinding.libs.Heap");var t=e.prototype;return t.push=function(t){return this.heapFunction.heappush(this.nodes,t,this.cmp)},t.pop=function(){return this.heapFunction.heappop(this.nodes,this.cmp)},t.peek=function(){return this.nodes[0]},t.contains=function(t){return-1!==this.nodes.indexOf(t)},t.replace=function(t){return this.heapFunction.heapreplace(this.nodes,t,this.cmp)},t.pushpop=function(t){return this.heapFunction.heappushpop(this.nodes,t,this.cmp)},t.heapify=function(){return this.heapFunction.heapify(this.nodes,this.cmp)},t.updateItem=function(t){return this.heapFunction.updateItem(this.nodes,t,this.cmp)},t.clear=function(){return this.nodes=[]},t.empty=function(){return 0===this.nodes.length},t.size=function(){return this.nodes.length},t.clone=function(){var t=new e;return t.nodes=this.nodes.slice(0),t},t.toArray=function(){return this.nodes.slice(0)},e}()),h=function(){function t(){this.defaultCmp=function(t,e){return t<e?-1:e<t?1:0}}n(t,"PathFinding.libs.HeapFunction");var e=t.prototype;return e.insort=function(t,e,i,n,s){var a=NaN;if(null==i&&(i=0),null==s&&(s=this.defaultCmp),i<0)throw new Error("lo must be non-negative");for(null==n&&(n=t.length);i<n;)s(e,t[a=Math.floor((i+n)/2)])<0?n=a:i=a+1;return[].splice.apply(t,[i,i-i].concat(e)),e},e.heappush=function(t,e,i){return null==i&&(i=this.defaultCmp),t.push(e),this._siftdown(t,0,t.length-1,i)},e.heappop=function(t,e){var i,n;return null==e&&(e=this.defaultCmp),i=t.pop(),t.length?(n=t[0],t[0]=i,this._siftup(t,0,e)):n=i,n},e.heapreplace=function(t,e,i){var n;return null==i&&(i=this.defaultCmp),n=t[0],t[0]=e,this._siftup(t,0,i),n},e.heappushpop=function(t,e,i){var n;return null==i&&(i=this.defaultCmp),t.length&&i(t[0],e)<0&&(e=(n=[t[0],e])[0],t[0]=n[1],this._siftup(t,0,i)),e},e.heapify=function(t,e){var i,n,s,a,r,o=0,h=0,l=0;for(null==e&&(e=this.defaultCmp),a=[],h=0,i=(s=function(){for(r=[],l=0,n=Math.floor(t.length/2);0<=n?l<n:n<l;0<=n?l++:l--)r.push(l);return r}.apply(this).reverse()).length;h<i;h++)o=s[h],a.push(this._siftup(t,o,e));return a},e.updateItem=function(t,e,i){var n;return null==i&&(i=this.defaultCmp),-1===(n=t.indexOf(e))?null:(this._siftdown(t,0,n,i),this._siftup(t,n,i))},e.nlargest=function(t,e,i){var n,s,a,r,o=0;if(null==i&&(i=this.defaultCmp),!(s=t.slice(0,e)).length)return s;for(this.heapify(s,i),o=0,a=(r=t.slice(e)).length;o<a;o++)n=r[o],this.heappushpop(s,n,i);return s.sort(i).reverse()},e.nsmallest=function(t,e,i){var n,s,a,r,o,h,l,u=0,f=0;if(null==i&&(i=this.defaultCmp),10*e<=t.length){if(!(a=t.slice(0,e).sort(i)).length)return a;for(s=a[a.length-1],u=0,r=(o=t.slice(e)).length;u<r;u++)i(n=o[u],s)<0&&(this.insort(a,n,0,null,i),a.pop(),s=a[a.length-1]);return a}for(this.heapify(t,i),l=[],f=0,h=Math.min(e,t.length);0<=h?f<h:h<f;0<=h?++f:--f)l.push(this.heappop(t,i));return l},e._siftdown=function(t,e,i,n){var s,a,r=0;for(null==n&&(n=this.defaultCmp),s=t[i];e<i&&n(s,a=t[r=i-1>>1])<0;)t[i]=a,i=r;return t[i]=s},e._siftup=function(t,e,i){var n,s,a,r=0,o=0;for(null==i&&(i=this.defaultCmp),n=t.length,s=t[a=e],r=2*e+1;r<n;)(o=r+1)<n&&!(i(t[r],t[o])<0)&&(r=o),t[e]=t[r],r=2*(e=r)+1;return t[e]=s,this._siftdown(t,a,e,i)},t}();(function(t){function e(t){e.__super.call(this,t);var i=this.heuristic;this.heuristic=function(t,e){return 1e6*i(t,e)}}n(e,"PathFinding.finders.BestFirstFinder",s)})(),function(t){function e(t){e.__super.call(this,t);var i=this.heuristic;this.heuristic=function(t,e){return 1e6*i(t,e)}}n(e,"PathFinding.finders.BiBestFirstFinder",a)}(),function(t){function e(t){e.__super.call(this,t),this.heuristic=function(t,e){return 0}}n(e,"PathFinding.finders.BiDijkstraFinder",a)}(),function(t){function e(t){e.__super.call(this,t),this.heuristic=function(t,e){return 0}}n(e,"PathFinding.finders.DijkstraFinder",s)}(),function(t){function e(t){e.__super.call(this,t)}n(e,"PathFinding.finders.JPFAlwaysMoveDiagonally",r);var i=e.prototype;i._jump=function(t,e,i,n){var s=this.grid,a=t-i,r=e-n;if(!s.isWalkableAt(t,e))return null;if(1==this.trackJumpRecursion&&(s.getNodeAt(t,e).tested=!0),s.getNodeAt(t,e)==this.endNode)return[t,e];if(0!==a&&0!==r){if(s.isWalkableAt(t-a,e+r)&&!s.isWalkableAt(t-a,e)||s.isWalkableAt(t+a,e-r)&&!s.isWalkableAt(t,e-r))return[t,e];if(this._jump(t+a,e,t,e)||this._jump(t,e+r,t,e))return[t,e]}else if(0!==a){if(s.isWalkableAt(t+a,e+1)&&!s.isWalkableAt(t,e+1)||s.isWalkableAt(t+a,e-1)&&!s.isWalkableAt(t,e-1))return[t,e]}else if(s.isWalkableAt(t+1,e+r)&&!s.isWalkableAt(t+1,e)||s.isWalkableAt(t-1,e+r)&&!s.isWalkableAt(t-1,e))return[t,e];return this._jump(t+a,e+r,t,e)},i._findNeighbors=function(t){var e,i,n=t.parent,s=t.x,a=t.y,r=this.grid,o=0,h=0,l=0,u=0,f=[],d=0,c=0;if(n)o=n.x,h=n.y,l=(s-o)/Math.max(Math.abs(s-o),1),u=(a-h)/Math.max(Math.abs(a-h),1),0!==l&&0!==u?(r.isWalkableAt(s,a+u)&&f.push([s,a+u]),r.isWalkableAt(s+l,a)&&f.push([s+l,a]),r.isWalkableAt(s+l,a+u)&&f.push([s+l,a+u]),r.isWalkableAt(s-l,a)||f.push([s-l,a+u]),r.isWalkableAt(s,a-u)||f.push([s+l,a-u])):0===l?(r.isWalkableAt(s,a+u)&&f.push([s,a+u]),r.isWalkableAt(s+1,a)||f.push([s+1,a+u]),r.isWalkableAt(s-1,a)||f.push([s-1,a+u])):(r.isWalkableAt(s+l,a)&&f.push([s+l,a]),r.isWalkableAt(s,a+1)||f.push([s+l,a+1]),r.isWalkableAt(s,a-1)||f.push([s+l,a-1]));else for(d=0,c=(e=r.getNeighbors(t,A.Always)).length;d<c;++d)i=e[d],f.push([i.x,i.y]);return f}}(),function(t){function e(t){e.__super.call(this,t)}n(e,"PathFinding.finders.JPFMoveDiagonallyIfAtMostOneObstacle",r);var i=e.prototype;i._jump=function(t,e,i,n){var s=this.grid,a=t-i,r=e-n;if(!s.isWalkableAt(t,e))return null;if(!0===this.trackJumpRecursion&&(s.getNodeAt(t,e).tested=!0),s.getNodeAt(t,e)==this.endNode)return[t,e];if(0!==a&&0!==r){if(s.isWalkableAt(t-a,e+r)&&!s.isWalkableAt(t-a,e)||s.isWalkableAt(t+a,e-r)&&!s.isWalkableAt(t,e-r))return[t,e];if(this._jump(t+a,e,t,e)||this._jump(t,e+r,t,e))return[t,e]}else if(0!==a){if(s.isWalkableAt(t+a,e+1)&&!s.isWalkableAt(t,e+1)||s.isWalkableAt(t+a,e-1)&&!s.isWalkableAt(t,e-1))return[t,e]}else if(s.isWalkableAt(t+1,e+r)&&!s.isWalkableAt(t+1,e)||s.isWalkableAt(t-1,e+r)&&!s.isWalkableAt(t-1,e))return[t,e];return s.isWalkableAt(t+a,e)||s.isWalkableAt(t,e+r)?this._jump(t+a,e+r,t,e):null},i._findNeighbors=function(t){var e,i,n=t.parent,s=t.x,a=t.y,r=this.grid,o=0,h=0,l=0,u=0,f=[],d=0,c=0;if(n)o=n.x,h=n.y,l=(s-o)/Math.max(Math.abs(s-o),1),u=(a-h)/Math.max(Math.abs(a-h),1),0!==l&&0!==u?(r.isWalkableAt(s,a+u)&&f.push([s,a+u]),r.isWalkableAt(s+l,a)&&f.push([s+l,a]),(r.isWalkableAt(s,a+u)||r.isWalkableAt(s+l,a))&&f.push([s+l,a+u]),!r.isWalkableAt(s-l,a)&&r.isWalkableAt(s,a+u)&&f.push([s-l,a+u]),!r.isWalkableAt(s,a-u)&&r.isWalkableAt(s+l,a)&&f.push([s+l,a-u])):0===l?r.isWalkableAt(s,a+u)&&(f.push([s,a+u]),r.isWalkableAt(s+1,a)||f.push([s+1,a+u]),r.isWalkableAt(s-1,a)||f.push([s-1,a+u])):r.isWalkableAt(s+l,a)&&(f.push([s+l,a]),r.isWalkableAt(s,a+1)||f.push([s+l,a+1]),r.isWalkableAt(s,a-1)||f.push([s+l,a-1]));else for(d=0,c=(e=r.getNeighbors(t,A.IfAtMostOneObstacle)).length;d<c;++d)i=e[d],f.push([i.x,i.y]);return f}}(),function(t){function e(t){e.__super.call(this,t)}n(e,"PathFinding.finders.JPFMoveDiagonallyIfNoObstacles",r);var i=e.prototype;i._jump=function(t,e,i,n){var s=this.grid,a=t-i,r=e-n;if(!s.isWalkableAt(t,e))return null;if(!0===this.trackJumpRecursion&&(s.getNodeAt(t,e).tested=!0),s.getNodeAt(t,e)===this.endNode)return[t,e];if(0!==a&&0!==r){if(this._jump(t+a,e,t,e)||this._jump(t,e+r,t,e))return[t,e]}else if(0!==a){if(s.isWalkableAt(t,e-1)&&!s.isWalkableAt(t-a,e-1)||s.isWalkableAt(t,e+1)&&!s.isWalkableAt(t-a,e+1))return[t,e]}else if(0!==r&&(s.isWalkableAt(t-1,e)&&!s.isWalkableAt(t-1,e-r)||s.isWalkableAt(t+1,e)&&!s.isWalkableAt(t+1,e-r)))return[t,e];return s.isWalkableAt(t+a,e)&&s.isWalkableAt(t,e+r)?this._jump(t+a,e+r,t,e):null},i._findNeighbors=function(t){var e,i,n=t.parent,s=t.x,a=t.y,r=this.grid,o=0,h=0,l=0,u=0,f=[],d=0,c=0;if(n)if(o=n.x,h=n.y,l=(s-o)/Math.max(Math.abs(s-o),1),u=(a-h)/Math.max(Math.abs(a-h),1),0!==l&&0!==u)r.isWalkableAt(s,a+u)&&f.push([s,a+u]),r.isWalkableAt(s+l,a)&&f.push([s+l,a]),r.isWalkableAt(s,a+u)&&r.isWalkableAt(s+l,a)&&f.push([s+l,a+u]);else{var p=!1;if(0!==l){p=r.isWalkableAt(s+l,a);var g=r.isWalkableAt(s,a+1),b=r.isWalkableAt(s,a-1);p&&(f.push([s+l,a]),g&&f.push([s+l,a+1]),b&&f.push([s+l,a-1])),g&&f.push([s,a+1]),b&&f.push([s,a-1])}else if(0!==u){p=r.isWalkableAt(s,a+u);var m=r.isWalkableAt(s+1,a),v=r.isWalkableAt(s-1,a);p&&(f.push([s,a+u]),m&&f.push([s+1,a+u]),v&&f.push([s-1,a+u])),m&&f.push([s+1,a]),v&&f.push([s-1,a])}}else for(d=0,c=(e=r.getNeighbors(t,A.OnlyWhenNoObstacles)).length;d<c;++d)i=e[d],f.push([i.x,i.y]);return f}}(),function(t){function e(t){e.__super.call(this,t)}n(e,"PathFinding.finders.JPFNeverMoveDiagonally",r);var i=e.prototype;i._jump=function(t,e,i,n){var s=this.grid,a=t-i,r=e-n;if(!s.isWalkableAt(t,e))return null;if(!0===this.trackJumpRecursion&&(s.getNodeAt(t,e).tested=!0),s.getNodeAt(t,e)==this.endNode)return[t,e];if(0!==a){if(s.isWalkableAt(t,e-1)&&!s.isWalkableAt(t-a,e-1)||s.isWalkableAt(t,e+1)&&!s.isWalkableAt(t-a,e+1))return[t,e]}else{if(0===r)throw new Error("Only horizontal and vertical movements are allowed");if(s.isWalkableAt(t-1,e)&&!s.isWalkableAt(t-1,e-r)||s.isWalkableAt(t+1,e)&&!s.isWalkableAt(t+1,e-r))return[t,e];if(this._jump(t+1,e,t,e)||this._jump(t-1,e,t,e))return[t,e]}return this._jump(t+a,e+r,t,e)},i._findNeighbors=function(t){var e,i,n=t.parent,s=t.x,a=t.y,r=this.grid,o=0,h=0,l=0,u=0,f=[],d=0,c=0;if(n)o=n.x,h=n.y,l=(s-o)/Math.max(Math.abs(s-o),1),u=(a-h)/Math.max(Math.abs(a-h),1),0!==l?(r.isWalkableAt(s,a-1)&&f.push([s,a-1]),r.isWalkableAt(s,a+1)&&f.push([s,a+1]),r.isWalkableAt(s+l,a)&&f.push([s+l,a])):0!==u&&(r.isWalkableAt(s-1,a)&&f.push([s-1,a]),r.isWalkableAt(s+1,a)&&f.push([s+1,a]),r.isWalkableAt(s,a+u)&&f.push([s,a+u]));else for(d=0,c=(e=r.getNeighbors(t,A.Never)).length;d<c;++d)i=e[d],f.push([i.x,i.y]);return f}}()}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(t,e){"use strict";for(var i in Object.defineProperty(e,"__esModule",{value:!0}),Laya){var n=Laya[i];n&&n.__isclass&&(e[i]=n)}});